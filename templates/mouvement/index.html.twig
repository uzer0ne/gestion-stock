{% extends 'base.html.twig' %}

{% block title %}Historique des Mouvements{% endblock %}

{% block body %}
    <div class="mb-4">
        <h1>üìú Journal des Mouvements</h1>
        <p class="text-muted">Tracez toutes les entr√©es et sorties de stock.</p>
    </div>

    <div class="card shadow">
        <div class="card-body">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Date & Heure</th>
                        <th>Produit</th>
                        <th>Type</th>
                        <th>Quantit√©</th>
                        <th>Entrep√¥t</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                {% for mouv in mouvements %}
                    <tr>
                        <td>{{ mouv.dateMouvement|date('d/m/Y H:i') }}</td>
                        
                        <td>
                            <strong>{{ mouv.produit.nom }}</strong>
                            <br>
                            <small class="text-muted">{{ mouv.produit.reference }}</small>
                        </td>

                        <td>
                            {% if mouv.quantite > 0 %}
                                <span class="badge bg-success">ENTR√âE</span>
                            {% else %}
                                <span class="badge bg-danger">SORTIE</span>
                            {% endif %}
                            <br>
                            <small class="text-muted">{{ mouv.type }}</small>
                        </td>

                        <td class="fw-bold fs-5">
                            {% if mouv.quantite > 0 %}+{% endif %}{{ mouv.quantite }}
                        </td>

                        <td>{{ mouv.entrepot.nom }}</td>
                        <td>
                            <a href="{{ path('app_mouvement_pdf', {'id': mouv.id}) }}" target="_blank" class="btn btn-sm btn-outline-dark">
                                üñ®Ô∏è PDF
                            </a>
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center">Aucun mouvement enregistr√©.</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}